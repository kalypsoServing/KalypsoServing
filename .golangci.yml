version: "2"

run:
  timeout: 5m
  allow-parallel-runners: true

formatters:
  # Enable specific formatter.
  # Default: [] (uses standard Go formatting)
  enable:
    - goimports
  # Formatters settings.
  settings:
    goimports:
      local-prefixes:
        - github.com/kalypsoServing/KalypsoServing
  exclusions:
    # Log a warning if an exclusion path is unused.
    # Default: false
    warn-unused: true
    # Mode of the generated files analysis.
    #
    # - `strict`: sources are excluded by strictly following the Go generated file convention.
    #    Source files that have lines matching only the following regular expression will be excluded: `^// Code generated .* DO NOT EDIT\.$`
    #    This line must appear before the first non-comment, non-blank text in the file.
    #    https://go.dev/s/generatedcode
    # - `lax`: sources are excluded if they contain lines like `autogenerated file`, `code generated`, `do not edit`, etc.
    # - `disable`: disable the generated files exclusion.
    #
    # Default: lax
    generated: strict
    # Which file paths to exclude.
    # This option is ignored when using `--stdin` as the path is unknown.
    # Default: []
    paths: []

linters:
  # Default set of linters.
  # The value can be:
  # - `standard`: https://golangci-lint.run/docs/linters/#enabled-by-default
  # - `all`: enables all linters by default.
  # - `none`: disables all linters by default.
  # - `fast`: enables only linters considered as "fast"
  # Default: standard
  default: standard
  # Enable specific linter.
  enable:
    - bodyclose
    - errcheck
    - govet
    - staticcheck
    - noctx
    - gosec
    - unused
    - revive
    - ineffassign
    - misspell
    - gocyclo
    - gocritic
    - unparam
  # Disable specific linters.
  disable: []
  # All available settings of specific linters.
  settings:
    gocyclo:
      # Kubernetes Controller의 Reconcile 함수는 분기 처리가 많아 복잡도가 높은 편입니다.
      # 기존 코드의 상태를 고려하여 임계값을 25로 상향 조정합니다.
      min-complexity: 25
    govet:
      enable:
        - shadow
    errcheck:
      check-type-assertions: true
      # _ = func() 형태의 명시적 무시는 허용합니다 (기존 코드 호환성).
      check-blank: false
  # Defines a set of rules to ignore issues.
  # It does not skip the analysis, and so does not ignore "typecheck" errors.
  exclusions:
    # Mode of the generated files analysis.
    #
    # - `strict`: sources are excluded by strictly following the Go generated file convention.
    #    Source files that have lines matching only the following regular expression will be excluded: `^// Code generated .* DO NOT EDIT\.$`
    #    This line must appear before the first non-comment, non-blank text in the file.
    #    https://go.dev/s/generatedcode
    # - `lax`: sources are excluded if they contain lines like `autogenerated file`, `code generated`, `do not edit`, etc.
    # - `disable`: disable the generated files exclusion.
    #
    # Default: strict
    generated: lax
    # Log a warning if an exclusion rule is unused.
    # Default: false
    warn-unused: true
    # Predefined exclusion rules.
    # Default: []
    presets:
      - comments
      - std-error-handling
      - common-false-positives
      - legacy
    # Excluding configuration per-path, per-linter, per-text and per-source.
    rules:
      # dot-imports 경고 제외 (Ginkgo/Gomega 등에서 관례적으로 사용)
      - text: "dot-imports"
        linters:
          - revive
      # 테스트 파일 예외 처리
      - path: _test\.go
        linters:
          - gosec
          - noctx
          - bodyclose
          - gocyclo
          - errcheck
      # test 디렉토리 예외 처리 (테스트 유틸리티 등)
      - path: test/
        linters:
          - noctx
          - revive
      # 자동 생성된 파일 제외
      - path: zz_generated
        linters:
          - govet
          - revive
          - staticcheck
          - unused
          - errcheck

issues:
  max-issues-per-linter: 0
  max-same-issues: 0
